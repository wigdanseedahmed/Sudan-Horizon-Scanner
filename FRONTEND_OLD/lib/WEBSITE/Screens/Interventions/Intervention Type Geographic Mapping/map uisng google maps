import 'package:flutter/material.dart';
import 'dart:async';

import 'package:flutter/foundation.dart';
import 'package:flutter/gestures.dart';
import 'package:google_maps_flutter/google_maps_flutter.dart';
import 'package:map_test/dist1.dart';

import 'dist2.dart';
import 'dist3.dart';


class GoogleMapPage extends StatefulWidget {
  @override
  _GoogleMapPageState createState() => _GoogleMapPageState();
}

class _GoogleMapPageState extends State<GoogleMapPage> {
  Completer<GoogleMapController> _controller = Completer();
  Set<Polygon> polygon = new Set();

  @override
  void initState() {
    List<LatLng> distPoints = addPoints();
    List<Polygon> distPolygon = [
      Polygon(
        polygonId: PolygonId('dist'),
        points: distPoints,
        consumeTapEvents: true,
        strokeColor: Colors.grey,
        strokeWidth: 1,
        fillColor: Color(0xFFFF1744).withOpacity(0.4),
      ),
    ];
    polygon.addAll(distPolygon);
    super.initState();
  }

  addPoints() {
    List<LatLng> point = [];
    for (var i = 0; i < Dist.IN.length; i++) {
        var latLang = LatLng(Dist.IN[i][1], Dist.IN[i][0]);
        point.add(latLang);
    }
    return point;
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: SafeArea(
        child: GoogleMap(
          onMapCreated: (controller) {
            _controller.complete(controller);
          },
          gestureRecognizers: Set()
            ..add(Factory<PanGestureRecognizer>(() => PanGestureRecognizer())),
          initialCameraPosition:
              CameraPosition(target: LatLng(35.697791, 51.379233), zoom: 10),
          polygons: polygon,
        ),
      ),
    );
  }
}

class Dist
{
  static const List IN = [
    [
      51.38412002338114,
      35.74300506579035
    ],
    [
      51.38461899807706,
      35.74429378340329
    ],
    [
      51.38539139045448,
      35.74586119929674
    ],
    [
      51.385842085388134,
      35.74709769765289
    ],
    [
      51.385986840855935,
      35.748299327291846
    ],
    [
      51.38606194270838,
      35.74984922500766
    ],
    [
      51.38611558688868,
      35.75121622959622
    ],
    [
      51.386255061757474,
      35.75327985415754
    ],
    [
      51.38629529489273,
      35.75416791679879
    ],
    [
      51.38644558241663,
      35.75496025810577
    ],
    [
      51.38672989657226,
      35.75584823692799
    ],
    [
      51.38709459317934,
      35.75661015192645
    ],
    [
      51.387958264482336,
      35.7582948306453
    ],
    [
      51.3882801295642,
      35.75890863741469
    ],
    [
      51.3885215283756,
      35.75957893821146
    ],
    [
      51.38860199464608,
      35.760101382236286
    ],
    [
      51.38866636766244,
      35.76085005382773
    ],
    [
      51.3884839774494,
      35.76201664711144
    ],
    [
      51.388237298039,
      35.76340091842053
    ],
    [
      51.387411093843184,
      35.76834565455968
    ],
    [
      51.38734135640877,
      35.76914654540792
    ],
    [
      51.387384271753035,
      35.76987778264077
    ],
    [
      51.38751301778577,
      35.77062637041319
    ],
    [
      51.38772759450703,
      35.7714620461596
    ],
    [
      51.388017273080685,
      35.772193283392454
    ],
    [
      51.388725376260794,
      35.77338586057598
    ],
    [
      51.38959449580085,
      35.774717661171216
    ],
    [
      51.39010939611279,
      35.7754923166625
    ],
    [
      51.39056009104643,
      35.77615381646097
    ],
    [
      51.391750991849335,
      35.77794695700689
    ],
    [
      51.3925126553907,
      35.77918295244885
    ],
    [
      51.39300618184956,
      35.78017511832749
    ],
    [
      51.3931349278823,
      35.7811587346649
    ],
    [
      51.3931349278823,
      35.782011677131834
    ],
    [
      51.39296326650532,
      35.78290812167626
    ],
    [
      51.392115688456414,
      35.78668542634139
    ],
    [
      51.39186892522699,
      35.788199868606796
    ],
    [
      51.39186892522699,
      35.78861753884191
    ],
    [
      51.39194402707943,
      35.78910494651146
    ],
    [
      51.392230688167956,
      35.78941935169951
    ],
    [
      51.39282747967391,
      35.79008294697373
    ],
    [
      51.39326736195243,
      35.79044621865728
    ],
    [
      51.39373272521663,
      35.790748637723794
    ],
    [
      51.39462321860981,
      35.79104451890581
    ],
    [
      51.39596164090855,
      35.791440563830776
    ],
    [
      51.39750927551051,
      35.79185395929528
    ],
    [
      51.39920174939931,
      35.79234564173544
    ],
    [
      51.401124893263436,
      35.79323764387117
    ],
    [
      51.401865182951724,
      35.79355095941179
    ],
    [
      51.402605472640005,
      35.7936640312856
    ],
    [
      51.40314199826213,
      35.79363796356674
    ],
    [
      51.403549694032506,
      35.79351617451363
    ],
    [
      51.40457957847542,
      35.7929939819459
    ],
    [
      51.40594214065532,
      35.79205403532404
    ],
    [
      51.40700429542545,
      35.791749436962704
    ],
    [
      51.40783049962127,
      35.79171465206454
    ],
    [
      51.409270762043576,
      35.79179302285922
    ],
    [
      51.4106547818956,
      35.791758154142
    ],
    [
      51.41294538839486,
      35.79137099403442
    ],
    [
      51.41652881963958,
      35.79059633854314
    ],
    [
      51.4182561622456,
      35.79002192671865
    ],
    [
      51.419618724425476,
      35.789273590403326
    ],
    [
      51.42018198831874,
      35.78859038147564
    ],
    [
      51.42065942152351,
      35.78791588972726
    ],
    [
      51.42104565962174,
      35.78708038161892
    ],
    [
      51.42166256769531,
      35.78577054161002
    ],
    [
      51.42258524759665,
      35.784569498704286
    ],
    [
      51.424201529985595,
      35.7830384602706
    ],
    [
      51.42424821718626,
      35.782994120002826
    ],
    [
      51.4257073388907,
      35.78137523922388
    ],
    [
      51.42670512064449,
      35.78006095680627
    ],
    [
      51.4275476695515,
      35.778700154826055
    ],
    [
      51.42929638601057,
      35.778851280540266
    ],
    [
      51.43052458628259,
      35.77918186280144
    ],
    [
      51.43168338439634,
      35.779894659847315
    ],
    [
      51.43320369399396,
      35.78094968999977
    ],
    [
      51.434167026125685,
      35.78200622889477
    ],
    [
      51.43451034887965,
      35.78241534958869
    ],
    [
      51.43493958614118,
      35.78276345002748
    ],
    [
      51.43586612171799,
      35.78340114522092
    ],
    [
      51.43671244248142,
      35.783834070519845
    ],
    [
      51.43718987568619,
      35.78401679600901
    ],
    [
      51.437650377446516,
      35.784114277542926
    ],
    [
      51.43935441836172,
      35.78459129165253
    ],
    [
      51.440974472607074,
      35.78491324055341
    ],
    [
      51.44240409001236,
      35.785274416761155
    ],
    [
      51.44655883177739,
      35.78642324041013
    ],
    [
      51.44986339710357,
      35.787711371289845
    ],
    [
      51.45414638198716,
      35.790021172347366
    ],
    [
      51.456953648998024,
      35.79145104120974
    ],
    [
      51.45848938129748,
      35.79260237942964
    ],
    [
      51.46048486098601,
      35.79319414179369
    ],
    [
      51.4631912937017,
      35.79280689786708
    ],
    [
      51.46631338499577,
      35.79189301896406
    ],
    [
      51.46968215570024,
      35.79137099403442
    ],
    [
      51.47176354989628,
      35.79070086087569
    ],
    [
      51.47392004594476,
      35.790230887564775
    ],
    [
      51.4755669222803,
      35.79008504244953
    ],
    [
      51.47634602018027,
      35.79011689368161
    ],
    [
      51.475195184874565,
      35.788893890189534
    ],
    [
      51.474001518043615,
      35.78769502657866
    ],
    [
      51.47337656334301,
      35.78710326421461
    ],
    [
      51.473164668830776,
      35.786918275611555
    ],
    [
      51.47271405771615,
      35.786696322815516
    ],
    [
      51.47197645023689,
      35.786498342262576
    ],
    [
      51.47143464401577,
      35.786372194619815
    ],
    [
      51.470898286031684,
      35.78625468033732
    ],
    [
      51.47047977760624,
      35.78605016189988
    ],
    [
      51.470093539507985,
      35.7853669529722
    ],
    [
      51.468210628779104,
      35.78154606241056
    ],
    [
      51.46661203220586,
      35.77806447128938
    ],
    [
      51.46429468743545,
      35.77534865084211
    ],
    [
      51.46226685360071,
      35.773120321883454
    ],
    [
      51.4601961882407,
      35.770726450337094
    ],
    [
      51.457868030815234,
      35.7679843945329
    ],
    [
      51.456591383142865,
      35.76649576852929
    ],
    [
      51.45604412868468,
      35.76584281827206
    ],
    [
      51.45545404270126,
      35.76389276849875
    ],
    [
      51.45466019265168,
      35.76165538708466
    ],
    [
      51.45437043025899,
      35.76105465608421
    ],
    [
      51.45382325961984,
      35.76041042300628
    ],
    [
      51.45252507045632,
      35.75474258008034
    ],
    [
      51.45226757839083,
      35.753575819158605
    ],
    [
      51.45126988045607,
      35.75290543454278
    ],
    [
      51.44961755588349,
      35.751895331391346
    ],
    [
      51.44899528339187,
      35.75162543410917
    ],
    [
      51.449166944768876,
      35.750301931598074
    ],
    [
      51.4494673521786,
      35.74830804447114
    ],
    [
      51.44947808101466,
      35.74777688326705
    ],
    [
      51.449360063818,
      35.74710633101316
    ],
    [
      51.44894163921157,
      35.746165965296115
    ],
    [
      51.44855548493237,
      35.74559121819553
    ],
    [
      51.44729744508504,
      35.743562378532374
    ],
    [
      51.447220834490054,
      35.743335564232495
    ],
    [
      51.44709896161791,
      35.74297455566281
    ],
    [
      51.446921935822864,
      35.741990520230246
    ],
    [
      51.44640494003514,
      35.742042739487005
    ],
    [
      51.44568619183801,
      35.742173329538446
    ],
    [
      51.44501019134705,
      35.742364939845
    ],
    [
      51.44450593605214,
      35.74251304807407
    ],
    [
      51.44359398498687,
      35.74261757040665
    ],
    [
      51.442885881806774,
      35.74260885322735
    ],
    [
      51.442124134446374,
      35.74257398451012
    ],
    [
      51.440976148987716,
      35.742582617870426
    ],
    [
      51.4400051893241,
      35.74266978966341
    ],
    [
      51.43922198429155,
      35.74266978966341
    ],
    [
      51.43831003322629,
      35.74269585738227
    ],
    [
      51.43709767475127,
      35.742687140202975
    ],
    [
      51.436325282373815,
      35.74260885322735
    ],
    [
      51.43569228104616,
      35.742495529896445
    ],
    [
      51.43511284007977,
      35.742364939845
    ],
    [
      51.43449056758817,
      35.7420863253835
    ],
    [
      51.43376109055498,
      35.74176412502552
    ],
    [
      51.43313873424435,
      35.741398338771035
    ],
    [
      51.432537919424874,
      35.74109357277163
    ],
    [
      51.432001477621775,
      35.74086717756691
    ],
    [
      51.43125045909741,
      35.7406146308243
    ],
    [
      51.43032777919609,
      35.74047532359356
    ],
    [
      51.428568250081895,
      35.74044917205566
    ],
    [
      51.4245771230668,
      35.74028379710606
    ],
    [
      51.422999732708575,
      35.7402472520082
    ],
    [
      51.42043579234684,
      35.74018799195278
    ],
    [
      51.41870844974082,
      35.740153039416526
    ],
    [
      51.41754973544612,
      35.7400834696202
    ],
    [
      51.4168738187742,
      35.74024012739051
    ],
    [
      51.416165799413136,
      35.740527542850344
    ],
    [
      51.415403968233704,
      35.740980333259756
    ],
    [
      51.4137785495703,
      35.74212119410072
    ],
    [
      51.41259837760347,
      35.74265235530481
    ],
    [
      51.41119298389836,
      35.74310514571425
    ],
    [
      51.40940118445695,
      35.743505716866906
    ],
    [
      51.40708375586754,
      35.74399337599354
    ],
    [
      51.40637833489646,
      35.74407602155884
    ],
    [
      51.40548247708528,
      35.74408918114682
    ],
    [
      51.404372042552865,
      35.7440194437124
    ],
    [
      51.40323478593026,
      35.74384099299385
    ],
    [
      51.40175429037273,
      35.74333154091897
    ],
    [
      51.400820881635326,
      35.742826531252774
    ],
    [
      51.40001613511163,
      35.74234323071578
    ],
    [
      51.39903444661195,
      35.74181206951167
    ],
    [
      51.39844436062853,
      35.74160738343616
    ],
    [
      51.39739838293153,
      35.7413417609246
    ],
    [
      51.39660436524389,
      35.74122852141272
    ],
    [
      51.39584798230151,
      35.74120245369386
    ],
    [
      51.395139879121416,
      35.741263390129944
    ],
    [
      51.39391142739231,
      35.74147679338472
    ],
    [
      51.3929780186549,
      35.741772842204824
    ],
    [
      51.39210361851585,
      35.74206897484393
    ],
    [
      51.39070618761875,
      35.74261757040665
    ],
    [
      51.38982642306166,
      35.74293532835594
    ],
    [
      51.389268523586416,
      35.74310514571425
    ],
    [
      51.38880718363578,
      35.74324889535367
    ],
    [
      51.388526892793635,
      35.743303293905285
    ],
    [
      51.38771158507194,
      35.7434077324188
    ],
    [
      51.38697657598266,
      35.7434491390205
    ],
    [
      51.38647508671579,
      35.743414270303276
    ],
    [
      51.38534319451125,
      35.74325752871394
    ],
    [
      51.38412002338114,
      35.74300506579035
    ]
  ];
}


initialLevelOfIntervention == 'Most targeted intervention type'? "Rule of Law and Constitutional Building" ==
                                            newValue
                                                .toString()
&& initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality.mostInterventionType
                                            .toString() ==
                                            'R_C')
                                            .toList()
                                            : "Democratic Transition and Economic Recovery" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality.mostInterventionType
                                            .toString() ==
                                            'D_E')
                                            .toList()
                                            : "Energy and Environment" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality
                                            .mostInterventionType
                                            .toString() ==
                                            'E_E')
                                            .toList()
                                            : "Health and Development" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData =
                                            readJsonFileContent
                                                .where((LocalityModel locality) => locality.mostInterventionType.toString() == 'H_D')
                                                .toList()
                                            : "Peace and Stabilization" == newValue.toString()
                                            ? searchData = readJsonFileContent.where((LocalityModel locality) => locality.mostInterventionType.toString() == 'P_S').toList()
                                            : searchData = readJsonFileContent.where((LocalityModel locality) => locality.mostInterventionType.toString() == 'I_D').toList(): initialLevelOfIntervention == "Least targeted intervention type"?"Rule of Law and Constitutional Building" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality.leastInterventionType
                                            .toString() ==
                                            'R_C')
                                            .toList()
                                            : "Democratic Transition and Economic Recovery" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality.leastInterventionType
                                            .toString() ==
                                            'D_E')
                                            .toList()
                                            : "Energy and Environment" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent
                                            .where((LocalityModel locality) =>
                                        locality
                                            .leastInterventionType
                                            .toString() ==
                                            'E_E')
                                            .toList()
                                            : "Health and Development" ==
                                            newValue
                                                .toString()
                                            && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData =
                                            readJsonFileContent
                                                .where((LocalityModel locality) => locality.leastInterventionType.toString() == 'H_D')
                                                .toList()
                                            : "Peace and Stabilization" == newValue.toString() && initialLevelOfIntervention == 'Most targeted intervention type'
                                            ? searchData = readJsonFileContent.where((LocalityModel locality) => locality.leastInterventionType.toString() == 'P_S').toList()
                                            : searchData = readJsonFileContent.where((LocalityModel locality) => locality.leastInterventionType.toString() == 'I_D').toList()